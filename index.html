<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>طلب تيشيرت الحسينية</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@700&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Cairo', sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f9f9f9;
    }
    .title-section {
      background-color: #333;
      color: white;
      padding: 30px 20px;
      text-align: center;
      font-size: 20px;
      font-weight: 700;
      line-height: 1.5;
    }
    .title-section img {
      max-width: 250px;
      height: auto;
      margin-bottom: 5px;
    }
    .rules-section {
      padding: 20px;
      background-color: #fff;
      margin: 20px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      border: 2px solid rgb(211, 3, 3);
    }
    .rules-section h2 {
      font-size: 20px;
      margin-bottom: 15px;
    }
    .rules-section ul {
      padding-right: 20px;
      line-height: 1.8;
    }
    .rules-section ul li {
      margin-bottom: 10px;
    }
    .agree-button {
      font-family: 'Cairo', sans-serif;
      margin-top: 20px;
      padding: 10px 20px;
      background-color: #169727;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 12px;
    }
    .agree-button:hover {
      background-color: #4fc580;
    }
    .button-container {
      text-align: center;
    }
    .confirmed {
      margin-top: 15px;
      color: green;
      font-weight: bold;
      display: none;
      text-align: center;
    }
    .delivery-button {
      font-family: 'Cairo', sans-serif;
      padding: 8px 20px;
      border: none;
      border-radius: 5px;
      background-color: #6c757d;
      color: white;
      cursor: pointer;
      font-size: 14px;
    }
    .size-box {
      width: 150px;
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 15px;
      text-align: center;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
      background-color: #fefefe;
      transition: border 0.2s ease-in-out;
    }
    .box-active {
      border: 3px solid #169727 !important;
      box-shadow: 0 0 6px rgba(0, 128, 0, 0.3);
    }
    .size-box label {
      display: block;
      font-weight: bold;
      margin-bottom: 10px;
    }
    .size-box input {
      width: 60px;
      padding: 5px;
      text-align: center;
      font-family: 'Cairo', sans-serif;
    }
    .size-summary-box {
      background-color: #169727;
      color: white;
      padding: 8px 15px;
      border-radius: 5px;
      font-size: 14px;
      font-family: 'Cairo', sans-serif;
    }
  </style>
</head>
<body>
  <div class="title-section">
    <img src="logos.png" alt="شعار الحسينية">
    <div>طلب تيشيرت<br>حسينية الگراشية ومجلس كريم أهل البيت ع<br>محرم الحرام والليالي الحسنية 1447هـ</div>
  </div>
  <div class="rules-section">
    <h2>الشروط والأحكام:</h2>
    <ul>
      <li>يتم تجهيز الطلبات خلال 1-2 يوم بعد تأكيد الدفع.</li>
      <li>في حال طلب التوصيل سيتم توصيل الطلب خلال يومين من تجهيز الطلب.</li>
      <li>نحن نقبل الدفع عبر "بنفت بي" فقط. بعد تقديم الطلب، سيتم التواصل معكم لإتمام عملية الدفع، أو ستتلقون طلب دفع عبر تطبيق "بنفت بي".</li>
      <li>بعد قبول الطلب لا يمكن استرجاع المبلغ.</li>
      <li>يرجى التأكد من اختيار المقاس المناسب عن طريق الأحجام الموجودة في حسينية الكراشية.</li>
      <li>نحن غير مسؤولين عن اختيار مقاس خاطئ، ولكن يمكننا مساعدتك بالاستبدال إن توفّر المقاس.</li>
      <li>يمكنك التواصل معنا عبر واتس اب 37767756.</li>
      <li>جميع التصاميم المعروضة على الموقع مملوكة لحسينية الكراشية و مجلس كريم أهل البيت عليه السلام، ويُمنع استخدامها أو إعادة بيعها دون إذن.</li>
    </ul>
    <div class="button-container">
      <button class="agree-button" onclick="agree()">أوافق على الشروط</button>
    </div>
    <div class="confirmed" id="confirmedMessage">✅ تمت الموافقة على الشروط.</div>
  </div>

<!-- Size Selection -->
<div style="padding: 20px; background-color: #fff; margin: 20px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1);">
  <h2 style="text-align: center;">اختيار المقاسات والكميات:</h2>
  <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 15px;">
    <div class="size-box"><label for="qty-s">S - صغير</label><input type="number" id="qty-s" min="0" value="0"></div>
    <div class="size-box"><label for="qty-m">M - وسط</label><input type="number" id="qty-m" min="0" value="0"></div>
    <div class="size-box"><label for="qty-l">L - كبير</label><input type="number" id="qty-l" min="0" value="0"></div>
    <div class="size-box"><label for="qty-xl">XL - كبير جداً</label><input type="number" id="qty-xl" min="0" value="0"></div>
    <div class="size-box"><label for="qty-xxl">XXL - كبير جداً جداً</label><input type="number" id="qty-xxl" min="0" value="0"></div>
    <div class="size-box"><label for="qty-xxxl">XXXL - الأكبر</label><input type="number" id="qty-xxxl" min="0" value="0"></div>
  </div>
</div>

<!-- Order Summary + Delivery Buttons + Size Summary -->
<div style="padding: 20px; background-color: #fff; margin: 20px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); text-align: center;">
  <h2>تفاصيل الطلب:</h2>
  <p style="font-size: 18px;">
    عدد التيشيرتات: <span id="totalQty" style="color: rgb(0, 128, 0);">0</span><br>
    السعر الإجمالي للتيشيرتات: <span id="tshirtTotal" style="color: rgb(0, 128, 0);">0</span> <span style="color: rgb(0, 128, 0);">دينار بحريني</span><br>
    التوصيل: <span id="deliveryCost" style="color: rgb(0, 128, 0);">0</span> <span style="color: rgb(0, 128, 0);">دينار بحريني</span><br>
    المجموع الكلي: <span id="finalTotal" style="color: rgb(0, 128, 0);">0</span> <span style="color: rgb(0, 128, 0);">دينار بحريني</span>
  </p>
  <div style="display: flex; justify-content: center; gap: 20px; margin-top: 10px;">
    <button onclick="selectDelivery(true)" id="btnDelivery" class="delivery-button">توصيل</button>
    <button onclick="selectDelivery(false)" id="btnPickup" class="delivery-button">إستلام من الحسينية</button>
  </div>
  <h3 style="margin-top: 30px;">تفاصيل المقاسات المطلوبة:</h3>
  <div id="sizeSummary" style="display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; margin-top: 10px;"></div>
</div>

<!-- Contact Section -->
<div style="padding: 20px; background-color: #fff; margin: 20px; border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1); max-width: 400px; margin-inline: auto;">
  <h2 style="text-align: center;">معلومات التواصل</h2>
  <form style="display: flex; flex-direction: column; gap: 15px;">
    <label for="name" style="font-weight: bold;">الأسم الثلاثي:</label>
    <input type="text" id="name" name="name" placeholder="اكتب اسمك الثلاثي هنا"
           style="padding: 10px; border-radius: 5px; border: 1px solid #ccc;
                  font-family: 'Cairo'; text-align: right; direction: rtl;" />
    <label for="mobile" style="font-weight: bold;">رقم الموبايل / واتس اب:</label>
    <input type="tel" id="mobile" name="mobile" placeholder="مثال: 32123456"
           style="padding: 10px; border-radius: 5px; border: 1px solid #ccc;
                  font-family: 'Cairo'; text-align: right; direction: rtl;" />
    <div id="deliveryAddressContainer" style="display: none; flex-direction: column; gap: 10px;">
      <label for="address" style="font-weight: bold;">عنوان التوصيل:</label>
      <textarea id="address" name="address" rows="3" placeholder="اكتب العنوان الكامل للتوصيل"
                style="padding: 10px; border-radius: 5px; border: 1px solid #ccc;
                       font-family: 'Cairo'; text-align: right; direction: rtl;"></textarea>
    </div>
    <div style="text-align: center; margin-top: 20px;">
      <button type="submit" class="agree-button">إرسال الطلب</button>
    </div>
  </form>
</div>


<script>
 
  function agree() {
    document.getElementById('confirmedMessage').style.display = 'block';
  }

  let deliverySelected = false;

  function updateTotal() {
    const sizes = ['s', 'm', 'l', 'xl', 'xxl', 'xxxl'];
    const sizeLabels = {
      s: 'S - صغير',
      m: 'M - وسط',
      l: 'L - كبير',
      xl: 'XL - كبير جداً',
      xxl: 'XXL - كبير جداً جداً',
      xxxl: 'XXXL - الأكبر'
    };
    let totalQty = 0;
    sizes.forEach(size => {
      const input = document.getElementById(`qty-${size}`);
      const qty = parseInt(input.value) || 0;
      totalQty += qty;
      const box = input.closest('.size-box');
      if (box) {
        if (qty > 0) {
          box.classList.add('box-active');
        } else {
          box.classList.remove('box-active');
        }
      }
    });
    const tshirtTotal = totalQty * 5;
    const deliveryCost = deliverySelected ? 1.5 : 0;
    const finalTotal = tshirtTotal + deliveryCost;
    document.getElementById('totalQty').textContent = totalQty;
    document.getElementById('tshirtTotal').textContent = tshirtTotal.toFixed(2);
    document.getElementById('deliveryCost').textContent = deliveryCost.toFixed(2);
    document.getElementById('finalTotal').textContent = finalTotal.toFixed(2);
    const summaryBox = document.getElementById('sizeSummary');
    summaryBox.innerHTML = '';
    sizes.forEach(size => {
      const qty = parseInt(document.getElementById(`qty-${size}`).value) || 0;
      if (qty > 0) {
        const box = document.createElement('div');
        box.className = 'size-summary-box';
        box.textContent = `${sizeLabels[size]}: ${qty}`;
        summaryBox.appendChild(box);
      }
    });
  }

  function selectDelivery(delivery) {
    deliverySelected = delivery;
    const btnDelivery = document.getElementById('btnDelivery');
    const btnPickup = document.getElementById('btnPickup');
    const addressBox = document.getElementById('deliveryAddressContainer');
    if (delivery) {
      btnDelivery.style.backgroundColor = '#169727';
      btnPickup.style.backgroundColor = '#6c757d';
      btnDelivery.innerHTML = '✅ توصيل';
      btnPickup.innerHTML = 'إستلام من الحسينية';
      addressBox.style.display = 'flex';
    } else {
      btnDelivery.style.backgroundColor = '#6c757d';
      btnPickup.style.backgroundColor = '#169727';
      btnDelivery.innerHTML = 'توصيل';
      btnPickup.innerHTML = '✅ إستلام من الحسينية';
      addressBox.style.display = 'none';
    }
    updateTotal();
  }

  window.onload = function () {
    const sizes = ['s', 'm', 'l', 'xl', 'xxl', 'xxxl'];
    sizes.forEach(size => {
      document.getElementById(`qty-${size}`).addEventListener('input', updateTotal);
    });
    updateTotal();
  };
</script>
<script>
  document.querySelector('form').addEventListener('submit', function(e) {
    e.preventDefault();

    // Collect form data
    const name = document.getElementById('name').value;
    const mobile = document.getElementById('mobile').value;
    const address = document.getElementById('address') ? document.getElementById('address').value : '';
    const sizes = ['s', 'm', 'l', 'xl', 'xxl', 'xxxl'];
    const sizeData = {};

    sizes.forEach(size => {
      sizeData[size] = document.getElementById(`qty-${size}`).value;
    });

    // Prepare data to send
    const data = {
      name,
      mobile,
      address,
      ...sizeData
    };

    // Send data to Google Apps Script
    fetch('https://script.google.com/macros/s/AKfycbzvJDGxndLtZtPLft0qJxHazjDt_60PZMOmRJyR9cRv3J3uSLTh--vVvbXOi-70kSjh/exec', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify(data)
})
.then(() => {
  alert('✅ تم إرسال الطلب بنجاح!');
  document.querySelector('form').reset();
  updateTotal(); // Reset totals
})
.catch(error => {
  console.error('Error!', error);
  alert('❌ حدث خطأ أثناء الإرسال. تأكد من الاتصال بالإنترنت.');
});
</script>

</body>
</html>
